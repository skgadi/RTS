(function(){function m(a,b){var c=[],h=[];b=b||function(a,b){var f=b,d=c.indexOf(f),e=[h[d]];for(d--;0<=d;d--)c[d][e[0]]===f&&(f=c[d],e.unshift(h[d]));return"[Circular ~"+e.join(".")+"]"};return function(d,e){var f=e;"object"===typeof e&&e&&(-1!==c.indexOf(e)?f=b(d,e):(c.push(e),h.push(d)));a&&(f=a(d,f));return f}}function n(a,b,c,d){return JSON.stringify(a,m(b,d),c)}function q(a){return function(b,c){a&&(c=a(b,c));return c}}function r(a,b){if(!a)return null;var c;if("string"===typeof b)c=b.split(".");
else return null;c.shift();for(var d=a,e=0;e<=c.length-1;e++)if("object"===typeof d&&d[c[e]])d=d[c[e]];else return null;return d}function e(a,b,c){d||(d=a);g++;if("[object Array]"===Object.prototype.toString.call(a))for(b=0;b<a.length;b++)c&&(a[b]=c(b,a[b])),"undefined"!==typeof a[b]&&null!==a[b]&&(a[b]=e(a[b],b,c));else if("[object Object]"===Object.prototype.toString.call(a))for(b in a)a.hasOwnProperty(b)&&(c&&(a[b]=c(b,a[b])),"undefined"!==typeof a[b]&&null!==a[b]&&(a[b]=e(a[b],b,c)));else"string"===
typeof a&&a.match(k)&&(c&&(a=c(b,a)),"undefined"!==typeof a&&null!==a&&(a=l(d,a.replace(k,"$1"))));g--;0===g&&(d=void 0);return a}function l(a,b){return r(a,b.replace(k,"$1"))}function p(a,b,c,h,g){c&&(k=c);d=JSON.parse(a,q(b));l=h||l;return g?g(d):e(d)}n.b=m;var d,g=0,k=/\[Circular\s~(([^\]]+)?)\]/;p.a=e;this.parse=p;this.stringify=n}).call("undefined"===typeof exports?this.InfiniteJSON={}:exports);